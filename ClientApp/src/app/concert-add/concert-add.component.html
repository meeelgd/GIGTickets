<app-nav-menu></app-nav-menu>




<div class="container" style="width: 60%;">

  <br />
  <h2><i class="fa fa-plus" aria-hidden="true"></i> Create concert</h2>
  <br />

  <form novalidate (ngSubmit)="onSubmit(concertForm)" [formGroup]="concertForm">
    <input type="hidden" name="Id" formControlName="Id" />
    <div class="form-group">
      Tour name:
      <input formControlName="TourName" type="text" class="form-control" required>
    </div>

    <div class="form-group">
      Picture path:
      <input formControlName="Picture" type="text" class="form-control" required>
    </div>

    <div class="form-group">
      Artist:
      <input formControlName="Artist" type="text" class="form-control" required>
    </div>

    <div class="form-group">
      Stage:
      <input formControlName="Stage" type="text" class="form-control" required>
    </div>

    <div class="form-group">
      <div class="row">
        <div class="col-2">
          Date:
        </div>
        <div class="col-10">
          <input formControlName="ConcertDate" class="form-control" type="date" required>
        </div>
      </div>
    </div>

    <div class="form-group">
      Number of tickets:
      <input formControlName="NumberTicketsAvailable" type="number" class="form-control" required>
    </div>

    <div class="form-group">
      Ticket price:
      <input formControlName="TicketPrice" type="number" class="form-control" required>
    </div>

    <div formArrayName="Tickets">

      <br />
      <h2><i class="fa fa-plus" aria-hidden="true"></i> Add Tickets:</h2>

      <div *ngFor="let item of TicketsFormArray.controls; index as i">
        <div [formGroupName]="i">
          <br />
          <h4>Ticket {{i+1}}</h4>

          <div class="form-group">
            Price:
            <input formControlName="Price" type="number" class="form-control" required>
          </div>

          <div class="form-group">
            Category:
            <input formControlName="Category" type="text" class="form-control" required>
          </div>

        </div>

        <button type="button" class="btn btn-danger" (click)="deleteTicket(i)" *ngIf="TicketsFormArray.controls.length > 1">
          <i class="fa fa-trash-o" aria-hidden="true"></i> Delete
        </button>
        <br />

      </div>
    </div>
    <br />
    <button type="button" class="btn btn-primary" (click)="addTicket()">+ New ticket</button>
    <br />
    <br />
    <br />

    <hr class="mb-4">
    <button type="submit" class="btn btn-primary btn-lg pull-right" [disabled]="!concertForm.valid">Create concert</button>
  </form>
</div>

<!--<pre>{ {concertForm.value | json }}</pre>-->
